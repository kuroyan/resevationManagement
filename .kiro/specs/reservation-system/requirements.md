# 予約システム - 要件定義書

## はじめに

本システムは、Firebaseを使用したシンプルな予約管理Webアプリケーションです。ユーザー認証、予約の作成・表示・削除機能を提供し、スマートフォンでの利用を想定したレスポンシブデザインを採用しています。

## 用語集

- **システム**: 予約管理Webアプリケーション
- **ユーザー**: システムを利用する一般利用者
- **予約**: サービス、日付、時間を含む予約情報
- **Firebase Authentication**: Googleが提供する認証サービス
- **Firestore**: Googleが提供するNoSQLデータベースサービス

## 要件

### 要件1: ユーザー認証

**ユーザーストーリー:** ユーザーとして、メールアドレスとパスワードでアカウントを作成・ログインしたい。そうすることで、自分の予約を安全に管理できる。

#### 受入基準

1. WHEN ユーザーがメールアドレスとパスワード（6文字以上）を入力して新規登録ボタンをクリックした場合、THEN システムはFirebase Authenticationに新しいアカウントを作成し、自動的にログイン状態にする
2. WHEN ユーザーが既存のメールアドレスとパスワードを入力してログインボタンをクリックした場合、THEN システムは認証を行い、成功時にログイン状態にする
3. WHEN ユーザーが無効な認証情報を入力した場合、THEN システムは日本語のエラーメッセージを表示する
4. WHEN ユーザーがログアウトボタンをクリックした場合、THEN システムはログアウトしてログイン画面に戻る
5. WHEN ユーザーが「ログイン状態を保持」にチェックを入れてログインした場合、THEN システムはブラウザを閉じてもログイン状態を保持する

### 要件2: パスワードリセット

**ユーザーストーリー:** ユーザーとして、パスワードを忘れた場合にリセットできるようにしたい。そうすることで、アカウントに再度アクセスできる。

#### 受入基準

1. WHEN ユーザーがメールアドレスを入力して「パスワードを忘れた？」リンクをクリックした場合、THEN システムはFirebase経由でパスワードリセットメールを送信する
2. WHEN メールアドレスが未登録の場合、THEN システムは「このメールアドレスは登録されていません」というエラーメッセージを表示する
3. WHEN パスワードリセットメールの送信に成功した場合、THEN システムは成功メッセージを表示する

### 要件3: 予約作成

**ユーザーストーリー:** ユーザーとして、サービス、日付、時間を指定して予約を作成したい。そうすることで、予定を管理できる。

#### 受入基準

1. WHEN ユーザーがサービス、日付、時間を選択して「予約する」ボタンをクリックした場合、THEN システムはFirestoreに予約データを保存する
2. WHEN 予約作成に成功した場合、THEN システムは成功メッセージを表示し、入力フィールドをクリアする
3. WHEN 予約作成中の場合、THEN システムはボタンを無効化し「予約中...」と表示する
4. WHEN 予約データには、ユーザーID、メールアドレス、サービス名、日付、時間、ステータス、作成日時が含まれる

### 要件4: 予約一覧表示

**ユーザーストーリー:** ユーザーとして、自分の予約一覧を表示したい。そうすることで、予約状況を確認できる。

#### 受入基準

1. WHEN ユーザーがログインした場合、THEN システムは自分の予約のみをFirestoreから取得して表示する
2. WHEN 予約データが更新された場合、THEN システムはリアルタイムで画面を更新する
3. WHEN 予約が存在しない場合、THEN システムは「予約がありません」というメッセージを表示する
4. WHEN 各予約には、サービス名、日付、時間、ステータスが表示される

### 要件5: 予約削除

**ユーザーストーリー:** ユーザーとして、不要な予約を削除したい。そうすることで、予約リストを整理できる。

#### 受入基準

1. WHEN ユーザーが予約の「削除」ボタンをクリックした場合、THEN システムは確認ダイアログを表示する
2. WHEN ユーザーが削除を確認した場合、THEN システムはFirestoreから該当の予約を削除する
3. WHEN 削除が完了した場合、THEN システムは予約一覧から該当の予約を即座に削除する

### 要件6: レスポンシブデザイン

**ユーザーストーリー:** ユーザーとして、スマートフォンでも快適に利用したい。そうすることで、外出先でも予約管理ができる。

#### 受入基準

1. WHEN ユーザーがスマートフォンでアクセスした場合、THEN システムはシングルカラムレイアウトで表示する
2. WHEN ユーザーがデスクトップでアクセスした場合、THEN システムは最大幅を制限して中央に配置する
3. WHEN タッチ操作を行う場合、THEN システムは十分なタップ領域を提供する
4. WHEN 画面をスクロールした場合、THEN システムはヘッダーを固定表示する

### 要件7: UIデザイン

**ユーザーストーリー:** ユーザーとして、視覚的に魅力的で使いやすいインターフェースを利用したい。そうすることで、快適に操作できる。

#### 受入基準

1. WHEN ログイン画面を表示する場合、THEN システムはシアン/ブルーのカラースキームを使用する
2. WHEN 入力フィールドにフォーカスした場合、THEN システムは視覚的なフィードバックを提供する
3. WHEN エラーが発生した場合、THEN システムは赤色の背景で日本語のエラーメッセージを表示する
4. WHEN 成功メッセージを表示する場合、THEN システムは緑色の背景でメッセージを表示する
5. WHEN ボタンにホバーした場合、THEN システムは視覚的な変化を提供する

### 要件8: データ永続化

**ユーザーストーリー:** ユーザーとして、作成した予約データが永続的に保存されることを期待する。そうすることで、データの損失を防げる。

#### 受入基準

1. WHEN 予約を作成した場合、THEN システムはFirestoreに即座にデータを保存する
2. WHEN ブラウザをリロードした場合、THEN システムは保存された予約データを表示する
3. WHEN ネットワークエラーが発生した場合、THEN システムはエラーメッセージを表示する
4. WHEN 複数のデバイスから同じアカウントでアクセスした場合、THEN システムは同じ予約データを表示する

## 非機能要件

### パフォーマンス

- 予約一覧の表示は3秒以内に完了すること
- 予約作成は2秒以内に完了すること

### セキュリティ

- パスワードは6文字以上であること
- Firebase Authenticationによる認証を使用すること
- Firestoreのセキュリティルールでユーザーごとのデータアクセスを制限すること

### 互換性

- 最新のChrome、Firefox、Safari、Edgeで動作すること
- iOS Safari、Android Chromeで動作すること

### 可用性

- Firebaseの無料枠内で運用可能であること
- 月間数千件の予約に対応できること
